---
title: "(TIL) 2020-09-10 기록"
last_modified_at: 2020-09-10T19:41:28-05:00
categories:
  - TIL
tags:
  - TIL
---

## 오늘 한 일
- 그저께 회의를 해보니 이제부터는 문제풀이와 web 공부를 거의 접고 코딩을 해야 베타 테스트 일정을 맞출 수 있을 것 같아 문제풀이를 그만 두었다. 극단적이다 싶으면 하루에 한 문제 정도 푸는 것도 괜찮을 것 같다.
- 오늘은 새로운 보이스를 불러오는 함수를 만들었는데 그냥 불러오는 것은 일도 아니지만 각종 필터링이 들어가면서 그게 좀 문제가 되었다. 원래는 AWS나 Azure 같은 서비스를 이용해서 하려고 했지만 아직 flutter를 위한 sdk가 없어 둘을 연결하려면 그 sdk 비스무리한 걸 내가 직접 만들어야 하는데 그럴 바에야 성능 저하를 감수하고서라도 일단 기능을 되는대로 구현하고 추후에 AWS Amplify flutter가 정식버전이 되면 그때 업데이트하는 게 나을 것 같았다.
- 국가나 성별 같은 건 그냥 isEqualTo 연산자를 사용해서 검색하고 태그는 태그 하나하나 array_contains를 중첩하여 and 연산을 흉내내면 되는데 거리가 문제였다. geoquery 기능이 firestore에는 없기 때문에 위도와 경도를 하나의 코드로 바꿔주는 geohashing을 해서 그걸로 쿼리를 하면 되긴 되지만 이것 또한 제약이 많아서 사용하기가 껄끄러웠다. (예를 들면 order를 사용할 수 없고, 한 번에 문서를 9개까지밖에 못 가져온다.) 그래서 그냥 거리 계산은 클라이언트 단에서 처리하기로 했다. 추후에 AWS를 쓰게 되거나 한다면 좀 더 강력한 필터링 기능을 구현해보고 싶다.


## 내일 할 일
- 내일은 테스트를 위해서 일단 녹음 기능을 구현해보려고 한다.
- 녹음 기능이 구현되면 공개보이스 업로드 함수를 구현하여 DB에서 테스트를 해보고 불러오는 것까지 해봐야겠다.